bdjp([22],{1073:function(e,t,r){function a(e){var t=e.camp,r=e.fireEventPayload,a=e.checkout.products,n=[],l={},o=!0,u=!1,c=void 0;try{for(var p,f=t.products[Symbol.iterator]();!(o=(p=f.next()).done);o=!0){var d=p.value;l[d.id]=d}}catch(e){u=!0,c=e}finally{try{!o&&f.return&&f.return()}finally{if(u)throw c}}var v=!0,y=!1,h=void 0;try{for(var m,_=a[Symbol.iterator]();!(v=(m=_.next()).done);v=!0){var g=m.value,D=g.productID,k=g.count,H=g.variationID,R=l[D];if(R){var C=(0,b.filterSelectedVariation)((0,b.variationIDToVariationMap)(H),k),w=R.prices.find(C);n.push({productID:D,name:R.name,price:w&&w.price||0,count:k})}}}catch(e){y=!0,h=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw h}}var N=babelHelpers.extends({},r,{currency:(0,i.formatCurrency)(t.currency),items:n});return s.default.createElement(L,babelHelpers.extends({},e,{fireEventPayload:N}))}function n(e){return"checkout"===e.page?s.default.createElement(V,e):s.default.createElement(L,babelHelpers.extends({supportDirect:!0},e))}Object.defineProperty(t,"__esModule",{value:!0}),t.CheckoutFBPixelEventRoot=void 0,t.default=n;var i=r(360),l=r(159),o=r(363),u=(babelHelpers.interopRequireDefault(o),r(1)),s=babelHelpers.interopRequireDefault(u),c=r(44),p=r(18),f=babelHelpers.interopRequireDefault(p),d=r(778),v=babelHelpers.interopRequireDefault(d),b=r(794),y=r(17),h=babelHelpers.interopRequireDefault(y),m=r(380),_=babelHelpers.interopRequireDefault(m),g=r(38),D=babelHelpers.interopRequireDefault(g),k=r(994),H=babelHelpers.interopRequireDefault(k),R=r(774),C=r(759),w=babelHelpers.interopRequireDefault(C),N=r(157),q=babelHelpers.interopRequireDefault(N),E=r(14),P=babelHelpers.interopRequireDefault(E),x=r(764),I=babelHelpers.interopRequireDefault(x),S=r(80),T=babelHelpers.interopRequireDefault(S),F=r(156),j=babelHelpers.interopRequireDefault(F),O=/\s+/g,L=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){if(!this._isImage()){var e=this.props,t=e.fireEvent,r=e.fireEventPayload,a=this._getEventID();if(!window[a]){var n=(0,R.createFireEventTracker)(t,r);n&&setTimeout(n,60)}}}},{key:"_isImage",value:function(){if(c.LANDING_URL===location.href){var e=this.props,t=e.supportDirect,r=e.trigger;return t&&"direct"===r}}},{key:"_getEventID",value:function(){var e=this.props,t=e.page,r=e.fireEvent,a=e.fireEventPayload,n=a||h.default,i=n.eventName;return"bds_"+t+"_"+(("custom"===r?i:(0,v.default)(r))||"").replace(O,"_")+"_"+this.props.ID}},{key:"render",value:function(){var e=this.props,t=e.supportDirect,r=e.fireEvent,a=e.fireEventPayload,n=(this.context.serverMetadata,a||h.default),o=n.eventName,u=n.singlePixelID,p=n.eventValue,f=n.eventContentName,d="custom"===r?o:(0,v.default)(r),b=c.DEFAULT_CURRENCY;if(this._isImage()&&"none"!==r){var y=[],m=null;if("string"==typeof _fbids&&(m=_fbids.split(",")),d){if(m instanceof Array){var _=u?u.split(","):null,g=!0,D=!1,k=void 0;try{for(var H,R=m[Symbol.iterator]();!(g=(H=R.next()).done);g=!0){var C=H.value;if(!_||_.includes(C)){var w="https://www.facebook.com/tr?id="+C+"&ev="+encodeURIComponent(d);f&&(w+="&cd[content_name]="+encodeURIComponent(f)),p>0&&(w+="&cd[value]="+p+"&cd[currency]="+b);y.push(s.default.createElement("img",{key:C,height:"1",width:"1",src:w}))}}}catch(e){D=!0,k=e}finally{try{!g&&R.return&&R.return()}finally{if(D)throw k}}}return s.default.createElement("div",{style:j.default.none},y)}}if(t&&c.LANDING_URL===location.href){var N=u?u.split(","):null,q=this._getEventID(),E="",P={event_id:q,content_name:f};f&&(P.content_type="product"),p&&(P.value=(0,i.toCurrencyNumber)(p,b),P.currency=(b||"").replace("_D",""));var x=JSON.stringify(P);if(N){var I=l.fbStandardEvent.includes(d)?"trackSingle":"trackSingleCustom",S=!0,T=!1,F=void 0;try{for(var O,L=N[Symbol.iterator]();!(S=(O=L.next()).done);S=!0){E+='fbq("'+I+'","'+O.value+'","'+d+'",'+x+");"}}catch(e){T=!0,F=e}finally{try{!S&&L.return&&L.return()}finally{if(T)throw F}}}else{E+='fbq("'+(l.fbStandardEvent.includes(d)?"track":"trackCustom")+'","'+d+'",'+x+");"}return E+='window["'+q+'"]=1;',s.default.createElement("script",{dangerouslySetInnerHTML:{__html:E}})}return null}}]),t}(P.default);L.contextTypes={serverMetadata:f.default.any};var M=(0,w.default)(a,{initialVariables:{productIDs:[]},fragments:{camp:function(){return function(){return{children:[{fieldName:"currency",kind:"Field",metadata:{},type:"Int"},{alias:"products",calls:[{kind:"Call",metadata:{},name:"ids",value:{kind:"CallVariable",callVariableName:"productIDs"}}],children:[{fieldName:"id",kind:"Field",metadata:{isRequisite:!0},type:"ID"},{fieldName:"name",kind:"Field",metadata:{},type:"MustString"},{children:[{fieldName:"variationID",kind:"Field",metadata:{},type:"MustString"},{fieldName:"price",kind:"Field",metadata:{},type:"Price"}],fieldName:"prices",kind:"Field",metadata:{canHaveSubselections:!0,isPlural:!0},type:"ProductPrice"}],fieldName:"productsOf",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id",isPlural:!0},type:"Product"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],id:q.default.QL.__id(),kind:"Fragment",metadata:{},name:"FBPixelEvent_CampRelayQL",type:"Camp"}}()}}}),A=t.CheckoutFBPixelEventRoot=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(I.default);A.component=M,A.route=H.default,A.routeProps={productIDs:1};var U={},V=(0,T.default)(function(e,t){var r=t.checkoutID,a=(0,D.default)(_.default,e)[r]||m.noCheckout,n={},i=!0,l=!1,o=void 0;try{for(var u,s=a.products[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){n[u.value.productID]=!0}}catch(e){l=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(l)throw o}}var c=Object.keys(n),p=c.join();return U[p]||(U[p]=c),{checkout:a,productIDs:U[p]}})(A)},1074:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),n=babelHelpers.interopRequireDefault(a),i=r(767),l=babelHelpers.interopRequireDefault(i),o=r(227),u=babelHelpers.interopRequireDefault(o),s=r(774),c=r(14),p=babelHelpers.interopRequireDefault(c),f=r(10),d=babelHelpers.interopRequireDefault(f),v=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"_trigger",value:function(){if(!this._triggered){this._triggered=!0,this._unregister();var e=this.props,t=e.fireEvent,r=e.fireEventPayload,a=(0,s.createFireEventTracker)(t,r);a&&a()}}},{key:"render",value:function(){return n.default.createElement(d.default,{onLayout:this._layout})}},{key:"_layout",value:function(e){this._dom=e.target;var t=(0,l.default)(this._dom);if(t){var r=t.y;this._top=r}}},{key:"_recalculateLayout",value:function(){this._dom&&this._layout({target:this._dom})}},{key:"componentDidMount",value:function(){var e=this.props.registerScrollEvent;e&&e(this._pageScroll,this._recalculateLayout)}},{key:"componentWillUnmount",value:function(){this._unregister()}},{key:"_unregister",value:function(){var e=this.props.unregisterScrollEvent;e&&e(this._pageScroll,this._recalculateLayout)}},{key:"_pageScroll",value:function(e){var t=this.props.trigger,r=e.nativeEvent.contentOffset.y,a=r+u.default.get("window").height;"passed"===t?this._top<r&&this._trigger():this._top<a&&this._trigger()}}]),t}(p.default);t.default=v},1194:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a=r(774),n=r(1),i=(babelHelpers.interopRequireDefault(n),r(18)),l=babelHelpers.interopRequireDefault(i),o=r(367),u=(babelHelpers.interopRequireDefault(o),r(14)),s=babelHelpers.interopRequireDefault(u),c=r(948),p=babelHelpers.interopRequireDefault(c),f=function(e){function t(e){babelHelpers.classCallCheck(this,t);var r=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=r.props,n=a.ID,i=a.registerPageAction;return i&&i("popup.show."+n,r._resolveAction,r._resolveName),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){return null}}]),babelHelpers.createClass(t,[{key:"_resolveAction",value:function(e){var t=e.usageFireEvent,r=e.usageFireEventPayload;return{onClickTrack:(0,a.createFireEventTracker)(t,r),onPress:this._show}}},{key:"_resolveName",value:function(){return this.props.name}},{key:"componentDidMount",value:function(){var e=this.props,t=e._forceShow,r=e.hidden,a=e.trigger,n=e.triggerTimeoutSecond;if(t)return void this._show();r||(0,p.default)(a,n,this._show)}},{key:"_show",value:function(){var e=this,t=this.props,r=t.ID,a=t.showPopup;a&&a([r],function(){return babelHelpers.extends({},e.props,{locatorNamespace:e.context.locatorNamespace})})}},{key:"componentWillReceiveProps",value:function(e){e._forceShow!==this.props._forceShow&&this._show()}},{key:"componentDidUpdate",value:function(){this.props.hidden||this._sync()}},{key:"_sync",value:function(){var e=this,t=this.props.ID;this.props.showPopup([t],function(){return babelHelpers.extends({},e.props,{locatorNamespace:e.context.locatorNamespace})},!0)}}]),t}(s.default);f.contextTypes={locatorNamespace:l.default.any},t.default=f},767:function(e,t,r){function a(e){if(e){return e.parentNode&&e.parentNode.className&&e.parentNode.className.includes("scroll-view")?{y:e.offsetTop,height:e.offsetHeight}:a(e.parentNode)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},774:function(e,t,r){function a(e,t){var r=t||o.default,a=r.eventName,n=r.eventContentName,i=r.eventValue,l=babelHelpers.objectWithoutProperties(r,["eventName","eventContentName","eventValue"]);if(e&&"none"!==e){var u=l;return i&&i>0&&(u.value=i),n&&(u.content_name=n),"custom"===e?void(a&&(0,s.default)(babelHelpers.extends({},u,{type:"SimplePixelEvent",name:a}))):(0,s.default)(babelHelpers.extends({},u,{type:"SimplePixelEvent",name:(0,d.default)(e)}))}}function n(e,t,r,n){var i=t||o.default,l=i.adwords,u=i.tiktok,s=i.productsEventValue,f=i.items,d=babelHelpers.objectWithoutProperties(i,["adwords","tiktok","productsEventValue","items"]),v=d;s>0?(l=babelHelpers.extends({},l,{eventValue:s}),u=babelHelpers.extends({},u,{eventValue:s}),v=babelHelpers.extends({},v,{eventValue:s})):f&&(l=babelHelpers.extends({},l,{items:f}),u=babelHelpers.extends({},u,{items:f}),v=babelHelpers.extends({},v,{items:f})),a(e,v),l&&(0,p.trackAdwords)(l,r,n),u&&(0,c.trackTiktok)(u)}function i(e,t,r){return function(a){n(e,t,a,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.triggerFireEvent=n,t.createFireEventTracker=i;var l=r(17),o=babelHelpers.interopRequireDefault(l),u=(r(44),r(159)),s=babelHelpers.interopRequireDefault(u),c=r(791),p=r(788),f=r(778),d=babelHelpers.interopRequireDefault(f)},778:function(e,t,r){function a(e){return"string"==typeof e&&e.length?e[0].toUpperCase()+e.slice(1):""}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},788:function(e,t,r){function a(){dataLayer.push(arguments)}function n(){if(!h){h=!0;var e=document.createElement("script");e.src="https://www.googletagmanager.com/gtag/js",document.getElementsByTagName("head")[0].appendChild(e),m("js",new Date)}}function i(e){_[e]||(m("config","AW-"+e),_[e]=!0)}function l(e,t,r){var a=this;try{var l=e||d.default,s=l.items,f=l.eventLabel,v=l.eventValue,h=l.conversionID,_=l.conversionLabel;if(!h||!_)return;n(),i(h);var g=new Promise(function(e){var t={send_to:"AW-"+h+"/"+_,value:(0,u.toCurrencyNumber)(v),currency:(p.DEFAULT_CURRENCY||"").replace("_D",""),event_label:f};if(s){var r=o(s);r>0&&(t.value=(0,u.toCurrencyNumber)(r))}b.default.info("gtag event",t),m("event","conversion",babelHelpers.extends({},t,{event_callback:function(){e()}}))});if("newWindow"!==r){var D=(0,y.getStore)();D&&(t&&t.preventDefault&&t.preventDefault(),c.default.catchNextRouteChange().then(function(){var e=babelHelpers.asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g;case 2:D.dispatch(t);case 4:case"end":return e.stop()}},e,a)}));return function(t){return e.apply(this,arguments)}}()))}}catch(e){b.default.error("adwords failed",{error:e})}}function o(e){var t=0,r=!0,a=!1,n=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var o=i.value;if(o){if(o.productID){t+=(o.price>0?o.price:0)*(o.count>0?o.count:0)}}}}catch(e){a=!0,n=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw n}}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.injectAdwords=n,t.trackAdwords=l;var u=r(360),s=r(43),c=babelHelpers.interopRequireDefault(s),p=r(44),f=r(17),d=babelHelpers.interopRequireDefault(f),v=r(16),b=babelHelpers.interopRequireDefault(v),y=r(159),h=!1;window.dataLayer=window.dataLayer||[];var m=a,_={}},791:function(e,t,r){function a(e){var t=ttq.instances();if(!t)return void ttq.load(e);t.find(function(t){return t.pixelCode===e})||ttq.load(e)}function n(e){try{var t=e||o.default,r=t.items,n=t.singlePixelID,l=t.currency,c=t.eventType,f=t.eventValue;if(!c||"none"===c)return;var d={};if(d.content_id=location.pathname||"-",d.content_type="product","number"==typeof f&&f>0&&(d.value=(0,s.toCurrencyNumber)(f,l),d.currency=(l||u.DEFAULT_CURRENCY).replace("_D","")),r){var v=i(r),b=v.contents,y=v.total;d.contents=b,d.value=(0,s.toCurrencyNumber)(y,l),d.currency=(l||u.DEFAULT_CURRENCY).replace("_D","")}if(p.default.info("tiktok trigger",babelHelpers.extends({eventType:c},d)),"object"===("undefined"==typeof ttq?"undefined":babelHelpers.typeof(ttq))){if("string"==typeof n){var h=n.split(",");if(h.length){var m=!0,_=!1,g=void 0;try{for(var D,k=h[Symbol.iterator]();!(m=(D=k.next()).done);m=!0){var H=D.value;a(H),ttq.instance(H).track(c,d)}}catch(e){_=!0,g=e}finally{try{!m&&k.return&&k.return()}finally{if(_)throw g}}return}}if(window._allTtp instanceof Array){var R=!0,C=!1,w=void 0;try{for(var N,q=window._allTtp[Symbol.iterator]();!(R=(N=q.next()).done);R=!0){a(N.value)}}catch(e){C=!0,w=e}finally{try{!R&&q.return&&q.return()}finally{if(C)throw w}}}ttq.track(c,d)}}catch(e){p.default.error("tiktok failed",{error:e})}}function i(e){var t=[],r=[],a=0,n=!0,i=!1,l=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var c=o.value;if(c){var p=c.productID;if(p){var f=c.price>0?c.price:0,d=c.count>0?c.count:0;r.push(p),a+=f*d,t.push({content_id:p,content_type:"product",content_name:c.name,quantity:d,price:(0,s.toCurrencyNumber)(f)})}}}}catch(e){i=!0,l=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw l}}return{contents:t,total:a}}Object.defineProperty(t,"__esModule",{value:!0}),t.trackTiktok=n;var l=r(17),o=babelHelpers.interopRequireDefault(l),u=r(44),s=r(360),c=r(16),p=babelHelpers.interopRequireDefault(c)},948:function(e,t,r){function a(e,t,r){if("none"!==e)return"pageLoad"===e?void setTimeout(r):"timeout"===e?void setTimeout(r,1e3*t):void(0,i.default)(r)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var n=r(379),i=babelHelpers.interopRequireDefault(n)},994:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a=r(157),n=babelHelpers.interopRequireDefault(a),i=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(n.default.Route);i.routeName="products",i.paramDefinitions={productIDs:{required:!0}},i.queries={camp:function(e,t){return function(e){return{children:[].concat.apply([],[{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"},n.default.QL.__frag(e)]),fieldName:"camp",kind:"Query",metadata:{},name:"ProductsRoute",type:"Camp"}}(e.getFragment("camp",t))}},t.default=i}});
//# sourceMappingURL=22.js.map